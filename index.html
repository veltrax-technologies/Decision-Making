<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Veltrax — Private LLM Business Control Room</title>
<style>
  /* ─────────────────────────────────────────────
     Veltrax dark executive palette
     ───────────────────────────────────────────── */
  :root{
    --bg:#0F1220;           /* background */
    --text:#E6E7EB;         /* primary text */
    --muted:#A9B1C3;        /* secondary text */
    --panel:#121832;        /* card background */
    --panel2:#0F1633;       /* alt card */
    --border:#22304F;       /* borders */
    --accent:#6F42C1;       /* purple */
    --primary:#0066FF;      /* blue */
    --good:#20C997;         /* green */
    --warn:#FFB454;         /* yellow */
    --bad:#FF6B6B;          /* red */
  }
  *{box-sizing:border-box}
  html,body{height:100%}
  body{margin:0;background:var(--bg);color:var(--text);font:15px/1.6 system-ui,-apple-system,Segoe UI,Inter,Roboto,Arial,sans-serif}
  a{color:var(--primary);text-decoration:none}

  /* Header */
  header{position:sticky;top:0;z-index:30;background:linear-gradient(to bottom,rgba(2,6,23,.7),rgba(2,6,23,.2)),var(--panel);border-bottom:1px solid var(--border);display:flex;gap:12px;align-items:center;padding:12px 16px}
  .logo{width:28px;height:28px;border-radius:8px;background:linear-gradient(135deg,var(--accent),var(--primary))}
  .title{font-weight:800;letter-spacing:.2px}
  .spacer{flex:1}
  .btn{border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,0));padding:9px 12px;border-radius:10px;color:var(--text);cursor:pointer}
  .btn:hover{filter:brightness(1.06)}

  .wrap{max-width:1200px;margin:0 auto;padding:16px}

  /* Main split */
  .split{display:grid;grid-template-columns:1fr;gap:16px}
  @media (min-width:1024px){ .split{grid-template-columns:1.1fr 0.9fr} }

  .card{background:var(--panel);border:1px solid var(--border);border-radius:14px;padding:14px}
  h1{margin:0 0 8px 0;font-size:22px}
  h2{margin:0 0 10px 0}
  .muted{color:var(--muted)}

  /* Console */
  .console{display:flex;flex-direction:column;gap:10px;height:560px}
  .log{flex:1;overflow:auto;border:1px solid var(--border);border-radius:12px;padding:12px;background:var(--panel2)}
  .msg{display:flex;gap:10px;margin-bottom:10px}
  .bubble{max-width:92%;padding:10px 12px;border-radius:12px;white-space:pre-wrap}
  .you{background:rgba(0,102,255,.18);border:1px solid #1d4ed8}
  .ai{background:rgba(111,66,193,.18);border:1px solid rgba(111,66,193,.6)}
  .inputRow{display:flex;gap:8px}
  .input{flex:1;padding:10px 12px;border-radius:10px;border:1px solid var(--border);background:#0F1530;color:var(--text)}
  .input:focus{outline:2px solid var(--primary);outline-offset:2px}

  /* Quick Questions */
  .quick{display:flex;gap:8px;flex-wrap:wrap}
  .chip{border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,0));border-radius:999px;padding:7px 10px;color:var(--text);cursor:pointer;font-size:13px}
  .chip:focus{outline:2px solid var(--primary);outline-offset:2px}

  /* KPI panel */
  .tabs{display:flex;gap:8px;margin-bottom:10px}
  .tab{padding:8px 12px;border-radius:10px;border:1px solid var(--border);background:linear-gradient(180deg,rgba(255,255,255,.05),rgba(255,255,255,0));cursor:pointer;color:var(--text);}
  .tab[aria-selected="true"]{outline:2px solid var(--accent)}
  .kpis{display:grid;grid-template-columns:1fr 1fr;gap:10px}
  .tile{background:var(--panel2);border:1px solid var(--border);border-radius:12px;padding:12px}
  .tile h3{margin:0 0 6px 0;font-size:14px}
  .val{font-size:24px;font-weight:800}
  .badge{display:inline-block;padding:4px 9px;border-radius:999px;border:1px solid rgba(255,255,255,.15);font-size:12px;font-weight:800}
  .g{background:rgba(32,201,151,.18);color:#9CF0D5;border-color:rgba(32,201,151,.45)}
  .y{background:rgba(255,180,84,.2);color:#FFE1AF;border-color:rgba(255,180,84,.45)}
  .r{background:rgba(255,107,107,.2);color:#FFC2C2;border-color:rgba(255,107,107,.45)}
  .src{color:var(--muted);font-size:12px;margin-top:4px}

  /* Security checklist */
  .checklist{display:grid;grid-template-columns:1fr 1fr;gap:8px}
  .check{display:flex;align-items:center;gap:8px;padding:10px;border:1px solid var(--border);border-radius:10px;background:var(--panel2)}
  .dot{width:9px;height:9px;border-radius:50%;background:var(--good);box-shadow:0 0 0 3px rgba(32,201,151,.18)}

  /* Founders + Teaser */
  .founders{margin:16px 0;border:2px solid var(--accent);background:linear-gradient(180deg,rgba(111,66,193,.12),rgba(111,66,193,.03));border-radius:14px;padding:14px}
  .teaser{margin:16px 0;border:1px dashed var(--border);border-radius:12px;padding:12px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;background:rgba(255,255,255,.03)}
</style>
</head>
<body>
<header>
  <div class="logo" aria-hidden="true"></div>
  <div class="title">Veltrax — Private LLM Business Control Room</div>
  <div class="spacer"></div>
  <!-- Removed Industries & Theme buttons by request -->
</header>

<main class="wrap">
  <section class="split" aria-label="Console and KPIs">
    <!-- Left: Console -->
    <div class="card" aria-label="LLM console">
      <h1>Ask anything. Decide instantly — without risking IP/data.</h1>
      <div id="console" class="console" role="region" aria-label="Chat console">
        <div id="log" class="log" role="log" aria-live="polite"></div>
        <div class="inputRow">
          <input id="q" class="input" type="text" aria-label="Prompt" placeholder="What's our fraud loss reduction potential if we double review budget?"/>
          <button id="ask" class="btn" aria-label="Ask">Ask</button>
        </div>
        <div>
          <div class="muted" style="font-size:12px;margin-bottom:6px">Or click a quick question:</div>
          <div id="quick" class="quick" role="listbox" aria-label="Quick questions"></div>
        </div>
        <div class="muted" style="font-size:12px">All inference is local. No external calls. Auditable logs enabled.</div>
        <div class="muted" style="font-size:12px">Demo note: responses are illustrative and action‑oriented; the live system supports multi‑turn what‑ifs, drill‑downs, and evidence exports.</div>
      </div>
    </div>

    <!-- Right: KPI Panel with Tabs -->
    <div class="card" aria-label="KPI panel">
      <div class="tabs" role="tablist" aria-label="Industry tabs">
        <button role="tab" id="tab-banking" class="tab" aria-selected="true" data-industry="banking" aria-controls="panelKpis">Banking</button>
        <button role="tab" id="tab-retail" class="tab" aria-selected="false" data-industry="retail" aria-controls="panelKpis">Retail</button>
        <button role="tab" id="tab-legal" class="tab" aria-selected="false" data-industry="legal" aria-controls="panelKpis">Legal</button>
      </div>
      <div id="panelKpis" role="tabpanel" aria-labelledby="tab-banking">
        <div class="kpis" id="kpis"></div>
        <div id="kpiSrc" class="src"></div>
      </div>
    </div>
  </section>

  <!-- Security checklist -->
  <section class="card" aria-label="Model security">
    <h2>Model Security</h2>
    <div id="guardrails" class="checklist"></div>
  </section>

  <!-- Founders + Teaser -->
  <div class="founders" role="note" aria-label="Founders deal">
    <strong>Founders deal:</strong> 30% upfront with milestone deliveries. First 5 get <strong>15% off</strong> + <strong>1 year support</strong>.
  </div>
  <div class="teaser" role="region" aria-label="Next step">
    <div><strong>Next:</strong> Profitability Impact Explorer — model your savings, ROI, and break-even.</div>
    <a class="btn" href="https://veltrax-technologies.github.io/Profit-ROI/">Open ROI Explorer</a>
  </div>
</main>

<script>
// ───────────────────────────────────────────────────────────
// Industry model — KPIs, sources, responses, guardrails, quick Qs
// ───────────────────────────────────────────────────────────
const INDUSTRIES = {
  banking: {
    name:'Banking',
    example:"What's our fraud loss reduction potential if we double review budget?",
    quick:[
      "Which segments give us safest approval lift?",
      "Show ROI if analyst headcount +10%",
      "How do we cut chargeback loss rate by 20%?"
    ],
    kpis:[
      { key:'fraud', label:'Fraud Savings', val:2.8, unit:'$M', badge:'g', src:'Card disputes, chargebacks, reviewer outcomes' },
      { key:'ops', label:'Ops Savings', val:1.4, unit:'$M', badge:'g', src:'Queue automation, case triage, model‑assisted review' },
      { key:'lift', label:'Approval Lift', val:3.2, unit:'pp', badge:'y', src:'A/B approvals with RAG explanations' },
      { key:'roi', label:'Forecast ROI (12m)', val:218, unit:'%', badge:'g', src:'Cost vs savings model v24.10' }
    ],
    guards:[
      'Runs locally on bank‑owned GPUs','No external calls (internet egress blocked)','PCI/PII stays on‑prem','Immutable audit logs (exportable)'
    ],
    plays: {
      fraud_invest: `Executive blueprint — Double review budget (≈ +18 FTE‑eq)\n\nDiagnosis (last 90d):\n• Losses concentrated in fast‑swipe everyday spend; dispute win‑rate trailing peer median by ~7pp.\n• Reviewer throughput bottlenecked by evidence gathering and repeat merchants.\n\nActions (start this week):\n1) Route only high‑entropy cases to humans; enable Reviewer Assist (auto docs, merchant intel).\n2) Raise dispute quality: require three evidence artifacts; add pre‑submit checklist.\n3) Turn on velocity rules for repeat merchant abuse; quarantine cohorts for weekly review.\n\nMetrics to watch: chargeback win‑rate, cost per case, FPR/TPR drift.\nGuardrails: cap approval lift at +3.5pp; auto‑rollback if loss severity spikes.\n\nOwner/ETA/Impact:\n• Fraud Ops + Data (week 2 pilot).\n• Profit +$3.6–$4.1M/yr; payback < 3 months; p95 decision latency < 2.5s.`,
      approval_lift: `Executive blueprint — Safe approval lift by segment\n\nWhere to lift:\n• Loyal, low‑dispute cohorts; mid‑ticket subscriptions; high‑history SMB.\n\nLevers:\n1) Lower threshold by 20–30bps for green cohorts; keep amber/red unchanged.\n2) Add RAG explanations in underwriting console to defend decisions.\n3) Weekly post‑decision audit on lifted approvals (n≥300) with loss backtest.\n\nExpected impact: +2.0–3.5pp approvals in green cohorts → +$1.6–$2.4M profit @45% margin.\nRisks & mitigations: drift → nightly challenger model, auto‑alerts if KS-stat > 0.08.`,
      headcount: `Executive blueprint — Analyst headcount +10%\n\nPlan:\n• Use added capacity on edge clusters only; keep base traffic fully automated.\n• Stand up “playbook library” (refund abuse, first‑party, mule rings).\n\n30/60/90:\n• 30d: triage coverage 95%→99%; backlog cleared.\n• 60d: dispute win‑rate +4–6pp.\n• 90d: annualized fraud −$2.1–$2.8M; ops +$0.3–$0.5M.\nConfidence: high.`
    }
  },
  retail: {
    name:'Retail',
    example:'If we add product‑return verification at point of sale, what’s the shrink reduction?',
    quick:[
      "Which stores need associate‑assist the most?",
      "Forecast ROI if returns drop 15%",
      "How do we cut false declines without raising risk?"
    ],
    kpis:[
      { key:'fraud', label:'Shrink Reduction', val:1.1, unit:'$M', badge:'g', src:'Returns risk, receipt matching, CCTV summaries' },
      { key:'ops', label:'Ops Savings', val:0.7, unit:'$M', badge:'g', src:'Store associate workflow time saved' },
      { key:'lift', label:'Approval Lift', val:1.8, unit:'pp', badge:'g', src:'Fewer false declines, loyalty segmentation' },
      { key:'roi', label:'Forecast ROI (12m)', val:164, unit:'%', badge:'g', src:'Shrink + labor vs TCO' }
    ],
    guards:[
      'Edge inference in store or DC','No vendor LLM APIs','Customer PII stays on‑prem','Audit trail ties to POS events'
    ],
    plays: {
      returns: `Executive blueprint — POS return verification\n\nWhat we change:\n• Real‑time return scoring (receipt match, device graph, behavior history).\n• High‑risk only → associate review with LLM show‑your‑work.\n\nExpected impact (12m):\n• Shrink reduction: 20–25% → ~$1.0–$1.3M.\n• Ops savings: ~90k minutes avoided → ~$0.3–$0.4M.\n• CX: protect loyal segments with one‑tap override + receipt scan.\nNext best actions: deploy to top‑50 shrink stores first; weekly audit pack of 50 cases.`,
      associate: `Executive blueprint — Associate‑assist coverage\n\nPrioritize:\n• Stores with low conversion + long exception times.\n\nPlay:\n1) Triage exceptions; push policy snippets + prior resolutions to handheld.\n2) Add “one‑tap” creditor call scripts.\nImpact: +0.3–0.6pp conversion; labor −5–8% on exception minutes.`,
      declines: `Executive blueprint — Reduce false declines safely\n\nSteps:\n1) Loyalty‑aware override for green customers; cap risk score bump at 15bps.\n2) Add second‑look queue for high‑basket carts.\nImpact: approvals +1–2pp; margin +$0.4–$0.6M; risk held flat by cohort caps.`
    }
  },
  legal: {
    name:'Legal',
    example:'What’s the cycle‑time reduction if we deploy contract clause extraction across matters?',
    quick:[
      "Where do we lose most review hours?",
      "What clauses have lowest precision today?",
      "What’s a 30/60/90 for rollout?"
    ],
    kpis:[
      { key:'fraud', label:'Review Hours Saved', val:28, unit:'k', badge:'g', src:'Matter logs, clause recall/precision benchmarks' },
      { key:'ops', label:'Ops Savings', val:2.2, unit:'$M', badge:'g', src:'Paralegal/associate time recaptured' },
      { key:'lift', label:'Approval Lift', val:0.0, unit:'pp', badge:'g', src:'—' },
      { key:'roi', label:'Forecast ROI (12m)', val:186, unit:'%', badge:'g', src:'Time saved vs seats + GPUs' }
    ],
    guards:[
      'Work product never leaves firm VLAN','No external calls','Privileged docs encrypted at rest','Every query logged for QA'
    ],
    plays: {
      clauses: `Executive blueprint — Contract clause extraction\n\nDeployed:\n• Local LLM extracts/normalizes ~120 canonical clauses; RAG cites prior matters.\n\nImpact (12m):\n• Review hours −24k–32k; cycle time −12–16 days/matter.\n• Error rate: recall +9–12pp; rework down materially.\n30/60/90: 30d pilot on NDAs/MSAs; 60d add riders; 90d firm‑wide with audit packets.`,
      hours: `Executive blueprint — Cut review hours\n\nWhere we lose time:\n• Duplicative searches; inconsistent playbooks.\nFix:\n1) Central brief bank + one‑click citations;\n2) Confidence routing (low → associate);\n3) Daily calibration set.\nImpact: ~28k hrs saved; ~$2.2M equivalent.`,
      quality: `Executive blueprint — Raise precision/recall\n\nSteps:\n1) Expand calibration set by +2k clauses;\n2) Add counter‑examples to prompt bank;\n3) Weekly threshold tuning by matter type.\nImpact: +6–10pp F1; fewer escalations; smoother client reviews.`
    }
  }
};

// Lightweight intent routing per industry
const ROUTES = {
  banking:[
    {match:/(review|budget|fraud|chargeback|dispute|loss)/i, key:'fraud_invest'},
    {match:/(approval|segment|lift|decline)/i, key:'approval_lift'},
    {match:/(analyst|headcount|staff|capacity)/i, key:'headcount'}
  ],
  retail:[
    {match:/(return|pos|shrink|refund)/i, key:'returns'},
    {match:/(associate|assist|training)/i, key:'associate'},
    {match:/(false\s*decline|approval|conversion)/i, key:'declines'}
  ],
  legal:[
    {match:/(clause|contract|extraction)/i, key:'clauses'},
    {match:/(hours|cycle|turnaround|backlog)/i, key:'hours'},
    {match:/(precision|recall|quality|accuracy)/i, key:'quality'}
  ]
};

let current = 'banking';

// DOM helpers
const $ = (q,el=document)=>el.querySelector(q);
const log = $('#log');

function setIndustry(id){
  current = id; // tabs
  ['banking','retail','legal'].forEach(k=>{
    const el = $('#tab-'+k);
    if(!el) return;
    el.setAttribute('aria-selected', k===id ? 'true' : 'false');
    if(k===id) $('#panelKpis').setAttribute('aria-labelledby','tab-'+k);
  });
  // KPI tiles
  const cfg = INDUSTRIES[id];
  const kpis = $('#kpis'); kpis.innerHTML='';
  cfg.kpis.forEach(k=>{
    const tile = document.createElement('div');
    tile.className='tile'; tile.setAttribute('role','status'); tile.setAttribute('aria-label', k.label);
    tile.innerHTML = `<h3>${k.label} <span class="badge ${k.badge}">${k.badge==='g'?'Good':k.badge==='y'?'Watch':'Risk'}</span></h3>
      <div class="val">${k.val}<span style="font-size:14px;opacity:.8">${k.unit}</span></div>
      <div class="src">Source: ${k.src}</div>`;
    kpis.appendChild(tile);
  });
  // guardrails
  const g = $('#guardrails'); g.innerHTML='';
  cfg.guards.forEach(text=>{
    const row = document.createElement('div'); row.className='check';
    row.innerHTML = `<span class="dot" aria-hidden="true"></span><span>${text}</span>`;
    g.appendChild(row);
  });
  // quick questions
  const quick = $('#quick'); quick.innerHTML='';
  cfg.quick.forEach((qtxt)=>{
    const b = document.createElement('button');
    b.className='chip'; b.setAttribute('role','option'); b.setAttribute('aria-label', qtxt);
    b.textContent = qtxt;
    b.addEventListener('click',()=> askFrom(qtxt));
    b.addEventListener('keydown',e=>{ if(e.key==='Enter' || e.key===' '){ e.preventDefault(); askFrom(qtxt);} });
    quick.appendChild(b);
  });
  // seed console placeholder
  $('#q').placeholder = cfg.example;
}

// Pick a play based on the question text
function genResponse(industry, text){
  const cfg = INDUSTRIES[industry];
  const routes = ROUTES[industry] || [];
  for(const r of routes){ if(r.match.test(text)) return cfg.plays[r.key]; }
  // default: choose the first play deterministically
  const firstKey = Object.keys(cfg.plays)[0];
  return cfg.plays[firstKey];
}

// Streaming simulation
function appendMsg(who, txt){
  const row = document.createElement('div'); row.className='msg';
  const bubble = document.createElement('div'); bubble.className='bubble ' + (who==='you'?'you':'ai');
  bubble.setAttribute('role','article'); bubble.setAttribute('aria-label', who==='you'?'Your message':'Model response');
  row.appendChild(bubble); log.appendChild(row); log.scrollTop = log.scrollHeight;

  if(who==='ai'){
    let i=0; const timer = setInterval(()=>{
      bubble.textContent = txt.slice(0, ++i);
      log.scrollTop = log.scrollHeight;
      if(i>=txt.length) clearInterval(timer);
    }, 12);
  } else {
    bubble.textContent = txt;
  }
}

function ask(){
  const q = $('#q');
  const text = q.value.trim() || INDUSTRIES[current].example;
  askFrom(text);
}
function askFrom(text){
  appendMsg('you', text);
  $('#q').value=''; $('#q').focus();
  const a = genResponse(current, text);
  setTimeout(()=> appendMsg('ai', a), 180);
}

// Tabs interactions (click + keyboard arrows)
['banking','retail','legal'].forEach(k=>{
  const t = $('#tab-'+k);
  t.addEventListener('click', ()=>setIndustry(k));
  t.addEventListener('keydown', e=>{
    const order=['banking','retail','legal'];
    let idx = order.indexOf(current);
    if(e.key==='ArrowRight'){ idx=(idx+1)%order.length; setIndustry(order[idx]); t.blur(); $('#tab-'+order[idx]).focus(); }
    if(e.key==='ArrowLeft'){ idx=(idx-1+order.length)%order.length; setIndustry(order[idx]); t.blur(); $('#tab-'+order[idx]).focus(); }
  });
});

// Init
setIndustry('banking');
appendMsg('ai', 'Welcome to the Veltrax Control Room. Ask a business question on the left — or click a quick question. KPIs on the right update by industry context.');
</script>
</body>
</html>
